(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7772:function(e,t,r){Promise.resolve().then(r.bind(r,2581)),Promise.resolve().then(r.bind(r,3036)),Promise.resolve().then(r.bind(r,5669))},3469:function(e,t){"use strict";t.Z={src:"/_next/static/media/my_building_logo.3d8c087f.svg",height:50,width:200}},307:function(e,t,r){"use strict";r.d(t,{t:function(){return a},z:function(){return s}});let a={ADMIN_CREDENTIALS:{username:"admin",passweord:"admin@123"},SIGNINCONSTANTS:{username:"Username is required",password:{requirePassword:"Password is required"}},Login:{SUCCESS:"Login Successful",FAILED:"Login Unsuccessfull"},ROUTING_PATHS:{login:"/",dashboard:"/dashboard"},LOCAL_STORAGE_KEYS:{TOKEN:"token"},SHOPS_PAGINATION_FILTER:{limit:10,page:1,sort:"",search:""},FILTER:[{name:"All"},{name:"Approved"},{name:"Not Approved"}]},s={error:{badRequest:400,forbidden:403,internalServerError:500,notFound:404,unauthorized:401},success:200}},4170:function(e,t,r){"use strict";r.d(t,{vA:function(){return g},fD:function(){return p},ZP:function(){return l},py:function(){return c}});var a=r(6741),s=r(4567),n=r(307),o=r(2920);let i=(e,t)=>{(0,o.Am)(e,{...t})},d=async e=>{try{if(e.username===n.t.ADMIN_CREDENTIALS.username&&e.password===n.t.ADMIN_CREDENTIALS.passweord)return{message:n.t.Login.SUCCESS,success:!0,accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"};throw i(n.t.Login.FAILED,{type:"error"})}catch(t){throw t}},c=(0,a.hg)("signIn",async e=>{try{let t=await d(e);return t}catch(r){throw r}}),u=(0,a.oM)({name:"authSlice",initialState:{status:"idle",userStatus:"idle",isUserLoggedIn:!1},reducers:{auth:e=>e,updateIsLoggedIn:(e,t)=>{e.isUserLoggedIn=t.payload},updateIsLogout:(e,t)=>{e.isUserLoggedIn=t.payload}},extraReducers(e){e.addCase(c.pending,e=>{e.status="loading",e.userStatus="loading"}).addCase(c.fulfilled,(e,t)=>{e.status="fulfilled",e.userStatus="fulfilled",e.isUserLoggedIn=!0,s.m.setItem(n.t.LOCAL_STORAGE_KEYS.TOKEN,t.payload.accessToken),i(t.payload.message,{type:"success"})}).addCase(c.rejected,(e,t)=>{e.status="rejected",e.userStatus="rejected"})}});var l=u.reducer;let p=e=>e,g=u.actions},3036:function(e,t,r){"use strict";r.r(t);var a=r(9332),s=r(5784),n=r(307),o=r(4567),i=r(1831),d=r(4170);let c=e=>{let{children:t}=e,r=(0,a.useRouter)(),c=(0,i.TL)(),{isUserLoggedIn:u}=(0,i.CG)(d.fD).auth,l=(0,a.usePathname)();return(0,s.useEffect)(()=>{console.log("isUserLoggedIn",u),console.log("path",l);let e=!!o.m.getItem(n.t.LOCAL_STORAGE_KEYS.TOKEN);c(d.vA.updateIsLoggedIn(e)),e?r.push(n.t.ROUTING_PATHS.dashboard):r.push(n.t.ROUTING_PATHS.login)},[u,l]),t};t.default=c},969:function(e,t,r){"use strict";r.d(t,{ZP:function(){return S},kT:function(){return f},ED:function(){return g},cf:function(){return I},nu:function(){return h}});var a=r(6741),s=r(4170),n=r(1831),o=r(6154),i=r(307),d=r(4567);let c=o.Z.create({baseURL:"https://bc5d-122-179-138-114.ngrok-free.app"});c.interceptors.response.use(e=>e,e=>{let{config:t,response:r}=e;return r&&(null==r?void 0:r.status)===i.z.error.unauthorized&&(n.ZP.dispatch(s.vA.updateIsLoggedIn(!1)),d.m.removeItem("token")),Promise.reject(e)});let u=async e=>{try{let t=await c({method:"get",params:e,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","User-Agent":"*","ngrok-skip-browser-warning":"*"},url:"".concat("https://bc5d-122-179-138-114.ngrok-free.app","/building")});return t.data}catch(r){throw r}},l=async e=>{try{let t=await c({method:"patch",data:e,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","User-Agent":"*","ngrok-skip-browser-warning":"*"},url:"".concat("https://bc5d-122-179-138-114.ngrok-free.app","/building/").concat(e._id)});return t.data}catch(r){throw r}},p=async e=>{try{let t=await c({method:"delete",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json","User-Agent":"*","ngrok-skip-browser-warning":"*"},url:"".concat("https://bc5d-122-179-138-114.ngrok-free.app","/building/").concat(e)});return t.data}catch(r){throw r}},g=(0,a.hg)("get/shops",async e=>{try{let t=await u(e);return t}catch(r){throw r}}),h=(0,a.hg)("update/shops",async(e,t)=>{let{dispatch:r}=t;try{let a=await l(e);return r(g(i.t.SHOPS_PAGINATION_FILTER)),a}catch(s){throw s}}),f=(0,a.hg)("delete/shops",async(e,t)=>{let{dispatch:r}=t;try{let a=await p(e);return r(g(i.t.SHOPS_PAGINATION_FILTER)),a}catch(s){throw s}}),m=(0,a.oM)({name:"shop",initialState:{total:0,currentPage:0,perPage:0,totalPages:0,shops:[],getShopDataStatus:!1,isShopDeleted:!1,shopDeleted:""},reducers:{shops:e=>e},extraReducers(e){e.addCase(g.pending,e=>{e.getShopDataStatus=!1}).addCase(g.fulfilled,(e,t)=>{e.getShopDataStatus=!0,e.shops=t.payload.data,e.total=t.payload.total,e.currentPage=t.payload.currentPage,e.perPage=t.payload.perPage,e.totalPages=t.payload.totalPages}).addCase(g.rejected,e=>{e.getShopDataStatus=!1}).addCase(h.pending,e=>{e.getShopDataStatus=!1}).addCase(h.fulfilled,(e,t)=>{e.getShopDataStatus=!0,e.shops=t.payload.data}).addCase(h.rejected,e=>{e.getShopDataStatus=!1}).addCase(f.pending,e=>{e.isShopDeleted=!1}).addCase(f.fulfilled,(e,t)=>{e.isShopDeleted=!0,e.shopDeleted=t.payload.data}).addCase(f.rejected,e=>{e.isShopDeleted=!1})}});var S=m.reducer;let I=e=>e;m.actions},5669:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(1844),s=r(5784),n=r(4567),o=r(9332),i=r(5675),d=r.n(i),c=r(3469);let u=()=>{let e=(0,o.useRouter)(),t=()=>{n.m.clearLocalStorage(),e.push("/")};return(0,a.jsx)(s.Fragment,{children:(0,a.jsx)("nav",{className:"bg-seashell fixed w-full z-20 top-0 left-0 border-b-2 border-Lavender_Pinocchio",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between mx-auto m-3 px-14",children:[(0,a.jsx)(d(),{src:c.Z,alt:"my_building_logo",height:40,width:150}),(0,a.jsx)("div",{className:"flex md:order-2 ",children:(0,a.jsx)("button",{type:"button",className:"text-lavared bg-white border border-lavared font-medium rounded-lg text-sm px-4 py-2 text-center w-[160px] h-[46px] ",onClick:()=>{t()},children:"Logout"})})]})})})};var l=r(1831),p=r(4170),g=r(9008),h=r.n(g);let f=e=>{let{children:t}=e,{isUserLoggedIn:r}=(0,l.CG)(p.fD).auth;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(h(),{children:(0,a.jsx)("title",{children:"admin_mybuilding"})}),(0,a.jsxs)("div",{className:r?"h-screen content bg-seashell":"",children:[r&&(0,a.jsx)(u,{}),(0,a.jsx)("div",{className:r?"bg-seashell p-5   break-words":"",children:t})]})]})};var m=f},2581:function(e,t,r){"use strict";r.r(t),r.d(t,{Providers:function(){return o}});var a=r(1844),s=r(9473),n=r(1831);function o(e){let{children:t}=e;return(0,a.jsx)(s.zt,{store:n.ZP,children:t})}},1831:function(e,t,r){"use strict";r.d(t,{CG:function(){return c},TL:function(){return d}});var a=r(4170),s=r(969),n=r(6741),o=r(9473);let i=(0,n.xC)({reducer:{auth:a.ZP,shop:s.ZP}});t.ZP=i;let d=()=>(0,o.I0)(),c=o.v9},4567:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});class a{static setItem(e,t){localStorage.setItem(e,t)}static getItem(e){return localStorage.getItem(e)}static removeItem(e){return localStorage.removeItem(e)}static clearLocalStorage(){return localStorage.clear()}}},9008:function(e,t,r){e.exports=r(5322)},9332:function(e,t,r){e.exports=r(19)}},function(e){e.O(0,[512,17,744],function(){return e(e.s=7772)}),_N_E=e.O()}]);